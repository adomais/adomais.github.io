<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>JAVAweb入门 | adomais's blog</title><meta name="author" content="adomais"><meta name="copyright" content="adomais"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JAVAweb"><meta property="og:type" content="article"><meta property="og:title" content="JAVAweb入门"><meta property="og:url" content="https://egghead.top/2022/06/12/web_note/index.html"><meta property="og:site_name" content="adomais&#39;s blog"><meta property="og:description" content="JAVAweb"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://npm.elemecdn.com/adomais/6.webp"><meta property="article:published_time" content="2022-06-12T08:30:10.000Z"><meta property="article:modified_time" content="2022-11-18T13:16:38.370Z"><meta property="article:author" content="adomais"><meta property="article:tag" content="JAVA"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://npm.elemecdn.com/adomais/6.webp"><link rel="shortcut icon" href="https://npm.elemecdn.com/adomais/logo1.webp"><link rel="canonical" href="https://egghead.top/2022/06/12/web_note/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:void 0,translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"JAVAweb入门",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2022-11-18 21:16:38"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const a=864e5*o,n={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(n))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=o,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme"),o=(new Date).getHours();void 0===t?o<=6||o>=18?activateDarkMode():activateLightMode():"light"===t?activateLightMode():activateDarkMode();const a=saveToLocal.get("aside-status");void 0!==a&&("hide"===a?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://widget.heweather.net/simple/static/css/he-simple.css?v=1.4.0" media="defer" onload='this.media="all"'><script src="/js/SAO-Notify.js" async></script><svg aria-hidden="true" style="position:absolute;overflow:hidden;width:0;height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248 626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="space-scene"><div class="space-wrap"><div class="space-wall space-wall-right"></div><div class="space-wall space-wall-left"></div><div class="space-wall space-wall-top"></div><div class="space-wall space-wall-bottom"></div><div class="space-wall space-wall-back"></div></div><div class="space-wrap"><div class="space-wall space-wall-right"></div><div class="space-wall space-wall-left"></div><div class="space-wall space-wall-top"></div><div class="space-wall space-wall-bottom"></div><div class="space-wall space-wall-back"></div></div></div></div><script async>const preloader={endLoading:()=>{if(document.body.style.overflow="auto",document.getElementById("loading-box").style.transition="opacity 3s",document.getElementById("loading-box").style.opacity="0",setTimeout((function(){document.getElementById("loading-box").classList.add("loaded")}),3e3),sessionStorage.getItem("isReload"))return!0;sessionStorage.setItem("isReload",!0),document.body.insertAdjacentHTML("beforeend",'<div id="SAO-Welcome" style="position: fixed;display: block;background: transparent;top: calc(50% - 250px);z-index: 1000;left: 0;right: 0;margin: auto auto;font-family: \'SAOUI\';font-size: 8vw;width: fit-content;height: fit-content;color: rgba(201, 202, 203,0.7);text-decoration: underline 2vw rgba(201, 202, 203,0.7);">Welcome to my blog !</div>'),SAONotify("Notify","Welcome to my blog<br>Have a nice day!"),setTimeout((function(){document.getElementById("SAO-Welcome").remove()}),3e3)},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").style.transition="",document.getElementById("loading-box").style.opacity="1",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",(()=>{preloader.endLoading()})),document.getElementById("loading-box").addEventListener("click",(()=>{preloader.endLoading()})),document.addEventListener("pjax:send",(()=>{preloader.initLoading()})),document.addEventListener("pjax:complete",(()=>{preloader.endLoading()}))</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://npm.elemecdn.com/adomais/adomais2.webp" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">75</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">54</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg> <span>博客</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-rili"></use></svg> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg> <span>标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg> <span>分类</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yaoqing1"></use></svg> <span>留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xiangqing"></use></svg> <span>生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yinle"></use></svg> <span>音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yingshi"></use></svg> <span>电影</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-duanxin"></use></svg> <span>友链</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xihuan"></use></svg> <span>关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url('https://npm.elemecdn.com/adomais/6.webp')"><div class="menu-container" id="menu-container"><div class="menu-item"><div class="menu-item-main"><a class="site-page faa-parent animated-hover" href="/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shouye"></use></svg> <span>博客</span></a></div><div class="menu-item-main"><a class="site-page faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-rili"></use></svg> <span>时间轴</span></a></div><div class="menu-item-main"><a class="site-page faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg> <span>标签</span></a></div><div class="menu-item-main"><a class="site-page faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg> <span>分类</span></a></div><div class="menu-item-main"><a class="site-page faa-parent animated-hover" href="/comments/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yaoqing1"></use></svg> <span>留言板</span></a></div><div class="menu-item-main has-child"><div class="menu-item-parent"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xiangqing"></use></svg> <span>生活</span></a></div><div class="menu-item-child"><a class="faa-parent animated-hover site-page child" href="/music/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yinle"></use></svg> <span>音乐</span></a></div><div class="menu-item-child"><a class="faa-parent animated-hover site-page child" href="/movies/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yingshi"></use></svg> <span>电影</span></a></div></div><div class="menu-item-main"><a class="site-page faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-duanxin"></use></svg> <span>友链</span></a></div><div class="menu-item-main"><a class="site-page faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xihuan"></use></svg> <span>关于</span></a></div></div><div class="top-bar"><div class="message-container"><div class="message-item message-weather" onclick="btf.scrollToDest(0,500)"><div class="message-weather-box" id="he-plugin-simple"></div></div><div class="message-item message-date" onclick="Navvisible()"><div class="message-date-box" id="message-date-box"></div><div class="message-title-box" id="message-title-box"><a id="site-name" title="JAVAweb">JAVAweb</a></div></div><div class="message-item message-function"><a class="icon-V hidden faa-parent animated-hover" onclick="switchNightMode()" title="浅色和深色模式转换"><svg class="faa-tada" width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><div id="toggle-menu"><a class="site-page faa-parent animated-hover"><svg class="faa-tada icon" style="height:25px;width:25px" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg></a></div></div></div></div><button class="active-button" onclick="Navvisible()"></button></div><div id="post-info"><h1 class="post-title">JAVAweb入门</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-12T08:30:10.000Z" title="发表于 2022-06-12 16:30:10">2022-06-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-18T13:16:38.370Z" title="更新于 2022-11-18 21:16:38">2022-11-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/JAVA/">JAVA</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="JAVAweb入门"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-Servlet"><a href="#1-Servlet" class="headerlink" title="#1. Servlet"></a>#1. Servlet</h1><h2 id="1-获取参数"><a href="#1-获取参数" class="headerlink" title="1. 获取参数"></a>1. 获取参数</h2><p>s1.用户发请求，action=add;</p><p>s2.项目中web.xml中找到url-pattern=/add 第12行</p><p>s3.找第11行的servlet-name = AddServlet</p><p>s4.找servlet-mapping中ervlet-name一致的servlet，找到第7行</p><p>s5.找第8行的servlet-class -&gt; servlets.AddServlet</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>AddServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlets.AddServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>AddServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/add<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p>s6.用户发送的是post请求(method=post)，因此tomcat会执行AddServlet中的doPost方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fname</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;fname&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">priceStr</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;price&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">fcountStr</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;fcount&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">price</span> <span class="operator">=</span> Integer.parseInt(priceStr);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">fcount</span> <span class="operator">=</span> Integer.parseInt(fcountStr);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">remark</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;remark&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;fname = &quot;</span> + fname);</span><br><span class="line">        System.out.println(<span class="string">&quot;price = &quot;</span> + price);</span><br><span class="line">        System.out.println(<span class="string">&quot;fcount = &quot;</span> + fcount);</span><br><span class="line">        System.out.println(<span class="string">&quot;remark = &quot;</span> + remark);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="注意！"><a href="#注意！" class="headerlink" title="注意！"></a>注意！</h3><p><img src="https://npm.elemecdn.com/adomais/500.webp"></p><ul><li>出现这种问题，要关注读取配置文件的方式</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//法一：</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader().getResourceAsStream(<span class="string">&quot;druid.properties&quot;</span>);</span><br><span class="line"><span class="comment">//法二：</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> DruidUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;druid.properties&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>原因：使用ClassLoder读取配置文件，该方式只能读取类路径下的配置文件，所以一般需要将配置文件放在类路径目录下，即resources下。</li><li>而配置文件放在src下，则无法读取</li><li>问题的关键就在于配置文件的位置，这会影响读取的方法</li></ul><h2 id="2-设置编码"><a href="#2-设置编码" class="headerlink" title="2.设置编码"></a>2.设置编码</h2><ul><li>post方式下，设置编码，防止中文乱码；get方式目前不需要设置编码</li><li>注意，设置编码这一句代码必须在所有的获取参数动作之前</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="3-Servlet的继承关系"><a href="#3-Servlet的继承关系" class="headerlink" title="3. Servlet的继承关系"></a>3. Servlet的继承关系</h2><h3 id="1-继承关系"><a href="#1-继承关系" class="headerlink" title="1. 继承关系"></a>1. 继承关系</h3><ul><li><p>javax.servlet.Servlet接口</p><p>​ javax.servlet.GenericServlet抽象类</p><p>​ javax.servlet.http.HttpServlet抽象子类</p></li></ul><h3 id="2-相关方法"><a href="#2-相关方法" class="headerlink" title="2. 相关方法"></a>2. 相关方法</h3><ul><li><p>javax.servlet.Servlet接口:</p><ul><li>void init(config) - 初始化方法</li><li>void service(request, response) - 服务方法</li><li>void destroy() - 销毁方法</li></ul></li><li><p>javax.servlet.GenericServlet抽象类：</p><ul><li>void service(request, response) - 仍然是抽象的</li></ul></li><li><p>javax.servlet.http.HttpServlet 抽象子类：</p><ul><li>void service(request, response) - 不是抽象的</li></ul></li></ul><p>1.String method = req.getMethod(); 获取请求的方式：是post还是get还是其他什么</p><p>2.各种if判断，根据请求方式不同，调用不同的do方法</p><p>3.在HttpServlet这个抽象类中，do方法都差不多：</p><h4 id="service-方法"><a href="#service-方法" class="headerlink" title="service()方法"></a>service()方法</h4><ul><li><p>当有请求过来时，service方法会自动响应(其实是tomcat容器调用的)</p><p>在HttpServlet中我们会去分析请求的方式：到底是get、post还是其他等等</p><p>然后再决定调用的是哪个do开头的方法，这些方法都需要我们子类去实现对应的方法，否则会报405错误</p><p>因此，我们在新建Servlet时，我们就会考虑请求方法，并重写相应的do方法，否则默认调用get方法并报405错误</p></li></ul><h2 id="4-Servlet的生命周期"><a href="#4-Servlet的生命周期" class="headerlink" title="4. Servlet的生命周期"></a>4. Servlet的生命周期</h2><ul><li><p>生命周期：对应Servlet中的三个方法：init(), service(), destroy()</p></li><li><p>默认情况下：</p><p>第一次接收请求时，这个Servlet会进行实例化(调用构造方法)、初始化(init())、然后服务(service())</p><p>从第二次请求开始，每一次都是服务</p><p>当容器关闭时，其中所有的Servlet实例会被销毁，调用销毁方法(destroy)</p></li><li><p>Servlet实例tomcat只会创建一个，所有的请求都是这个实例去响应。</p><p>只有第一次接收请求，才会实例化、初始化，然后开始服务。</p><p>优点：提高系统的启动速度；缺点：第一次请求时，耗时较长</p></li><li><p>结论：如果需要提高系统的启动速度，这样就可以了；如果需要提高响应速度，我们应该设置Servlet的初始化时机。</p></li></ul><h3 id="Servlet的初始化时机"><a href="#Servlet的初始化时机" class="headerlink" title="Servlet的初始化时机"></a>Servlet的初始化时机</h3><ul><li><p>默认是第一次接收请求时，实例化、初始化，</p><p>我们可以通过在配置文件中设置<code>&lt;load-on-startup&gt;</code>来设置Servlet启动的先后顺序，</p><p>数字越小，启动越靠前，最小值0</p></li></ul><h3 id="Servlet在容器中是：单例的，线程不安全的"><a href="#Servlet在容器中是：单例的，线程不安全的" class="headerlink" title="Servlet在容器中是：单例的，线程不安全的"></a>Servlet在容器中是：单例的，线程不安全的</h3><ul><li><p>单例：所有的请求都是同一个实例去响应</p><p>线程不安全：一个线程需要根据这个实例中的某个成员变量值去做逻辑判断。但是中间某个时机，另一个线程改变了这个成员变量的值，导致第一个线程的执行路径发生了变化</p></li><li><p>我们已经知道了Servlet是线程不安全的，给我们的启发是：尽量不要在Servlet中定义成员变量，如果不得不定义成员变量，那么不要去：①修改成员变量的值②根据成员变量的值进行逻辑判断</p></li></ul><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><ul><li><p>Servlet中的初始化方法有两个：init(), init(ServletConfig config)</p><p>其中带参数的方法代码如下：</p><p>public void init(ServletConfig config) throws ServletException{</p><p>​ this.config = congfig;</p><p>​ init();</p><p>}</p><p>另一个无参的方法如下：</p><p>public void init() throws ServletException{</p><p>}</p><p>如果我们想在Servlet初始化时做一些准备工作，我们可以重写init()方法</p><p>我们可以通过如下步骤去获取初始化设置的数据</p><p>-获取config对象：ServletConfig config = getServletConfig();</p><p>-获取初始化参数值：config.getInitParameter(key);</p></li><li><p>在web.xml文件中配置Servlet</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo01Servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.Demo01Servlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>world<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>uname<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>jim<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo01Servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo01<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>也可以通过注解的方式进行配置：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &#123;&quot;/demo01&quot;&#125;,</span></span><br><span class="line"><span class="meta">        initParams = &#123;</span></span><br><span class="line"><span class="meta">            @WebInitParam(name=&quot;hello&quot;, value=&quot;world&quot;),</span></span><br><span class="line"><span class="meta">            @WebInitParam(name=&quot;uname&quot;, value=&quot;jim&quot;)</span></span><br><span class="line"><span class="meta">        &#125;)</span></span><br></pre></td></tr></table></figure></li><li><p>学习Servlet中的ServletContext和<code>&lt;context-param&gt;</code></p><p>1.获取ServletContext，有很多方法</p><p>在初始化方法中，ServletContext servletContext = getServletContext();</p><p>在服务方法中也可以通过req对象获取，也可以通过session获取</p><p>2.获取初始化值：</p><p>servletContext.getInitParameter();</p></li></ul><h2 id="5-Http协议"><a href="#5-Http协议" class="headerlink" title="5. Http协议"></a>5. Http协议</h2><ul><li>HTTP: Hyper Text Transfer Protocol 超文本传输协议。HTTP最大的作用就是确定了请求和响应数据的格式。</li><li>HTTP无状态：服务器无法判断这两次请求是同一个客户端发过来的，还是不同的客户端发过来的</li><li>HTTP请求响应包含两个部分：请求和响应</li></ul><h3 id="1-请求"><a href="#1-请求" class="headerlink" title="1. 请求"></a>1. 请求</h3><ul><li>请求包含三个部分：1. 请求行；2. 请求消息头； 3. 请求主体</li></ul><ol><li><p>请求行包含三个信息：1. 请求的方式；2. 请求的URL； 3. 请求的协议(一般都是HTTP1. 1)</p></li><li><p>请求消息头中包含了很多客户端需要告诉服务器的信息，比如浏览器型号、版本、能接收的内容的类型、发给服务器内容的类型、长度等等</p></li><li><p>请求体，三种情况：</p><p>get方式，没有请求体，但是有一个queryString</p><p>post方式，有请求体，form data</p><p>json格式，有请求体，request payload</p></li></ol><h3 id="2-响应"><a href="#2-响应" class="headerlink" title="2. 响应"></a>2. 响应</h3><ul><li>响应包含三个部分：1. 响应行； 2. 响应消息头； 3. 响应体</li></ul><ol><li>响应行包含三个信息：1. 协议； 2. 响应状态码(200)； 响应状态(ok)</li></ol><ul><li><p>响应状态码：</p><p>200：正常响应</p><p>404：找不到资源</p><p>405：请求方式不支持</p><p>500：服务器内部错误</p></li></ul><ol><li>响应消息头：包含了服务器的信息；服务器发送给浏览器的信息（内容的媒体类型、编码、内容长度等）</li><li>响应体：响应的实际内容(比如请求add.html页面时，响应的内容就是<html><head><body>&lt;form…)</body></head></html></li></ol><h2 id="6-会话"><a href="#6-会话" class="headerlink" title="6. 会话"></a>6. 会话</h2><ul><li><p>HTTP无状态：服务器无法判断这两次请求是同一个客户端发过来的，还是不同的客户端发过来的</p><p>需要通过会话跟踪技术来解决无状态的问题</p></li><li><p>会话跟踪技术：</p><p>客户端第一次发请求给服务器，服务器获取session，获取不到，则创建新的，然 后通过响应头响应给客户端；</p><p>下次客户端给服务器发请求时，会把sessionID通过请求头带给服务器，那么服务器就能获取到了，服务器判断两次是同一个客户端。</p></li><li><p>常用的API:</p><p>request.getSession() -&gt; 获取当前的会话，没有则创建一个新的会话</p><p>request.getSession(true) -&gt; 效果和不带参数相同</p><p>request.getSession(false) -&gt; 获取当前会话，没有则返回null，不会创建新的</p><p>session.getId() -&gt; 获取sessionId</p><p>session.isNew() -&gt; 判读当前session是否是新的</p><p>session.getMaxInactiveInterval() -&gt; session的非激活间隔时长， 默认1800秒</p><p>session.setMaxInactiveInterval() -&gt; 设置session的非激活间隔时长</p><p>session.invalidate() -&gt; 强制性让会话立即失效</p><p>…</p></li><li><p>session保存作用域</p><p>session.setAttribute(“uname”, “lina”); -&gt; 向当前session保存作用域保存一个数据”lina”，对应的key为”uname”;</p><p>session.getAttribute(“uname”); -&gt; 从当前session保存作用域获取指定的key”uname’对应的value值</p><p>void removeAttribute(k);</p></li><li><p>session保存作用域是和具体的某一个session对应的</p></li></ul><h2 id="7-服务器内部转发以及客户端重定向"><a href="#7-服务器内部转发以及客户端重定向" class="headerlink" title="7. 服务器内部转发以及客户端重定向"></a>7. 服务器内部转发以及客户端重定向</h2><ul><li><p>服务器内部转发：request.getRequestDispatchera(“…”).forward(request, response);</p><p>一次请求响应的过程，对于客户端而言，服务器内部经过了多少次转发，客户端是不知道的</p><p>地址栏没有变化</p></li><li><p>客户端重定向：response.sendRedirect(“…”);</p><p>两次请求响应的过程，客户端肯定知道URL有变化</p><p>地址栏有变化</p></li></ul><h2 id="8-保存作用域"><a href="#8-保存作用域" class="headerlink" title="8. 保存作用域"></a>8. 保存作用域</h2><ul><li>原始情况下，保存作用域有四个：page(页面级别，现在几乎不用), request(一次请求响应范围), session(一次会话范围), application(整个应用程序范围)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">req.setAttribute(<span class="string">&quot;uname&quot;</span>, <span class="string">&quot;adomais&quot;</span>);<span class="comment">//request保存作用域</span></span><br><span class="line"></span><br><span class="line">req.getSession().setAttribute(<span class="string">&quot;uname&quot;</span>, <span class="string">&quot;adomais&quot;</span>);<span class="comment">//session保存作用域</span></span><br><span class="line"></span><br><span class="line"><span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> req.getServletContext();<span class="comment">//application保存作用域</span></span><br><span class="line">application.setAttribute(<span class="string">&quot;uname&quot;</span>, <span class="string">&quot;lili&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="9-路径问题"><a href="#9-路径问题" class="headerlink" title="9. 路径问题"></a>9. 路径问题</h2><ul><li><p>../：返回上一级目录</p></li><li><p>绝对路径：<a target="_blank" rel="noopener" href="http://localhost:8080/contextroot/">http://localhost:8080/contextroot/</a>…</p></li><li><p><code>&lt;base href=&quot;http://localhost:8080/pro/&quot; /&gt;</code>的作用是：当前页面上的所有的路径都以这个为基础</p><p><code>&lt;link href=&quot;css/shopping.css&quot;&gt;</code></p></li><li><p>th:href=”@{}” 表示基于当前根目录</p><p><code>&lt;link th:href=&quot;@&#123;/css/shopping.css&#125;&quot;&gt;</code></p></li></ul><h2 id="10-什么是业务层"><a href="#10-什么是业务层" class="headerlink" title="10. 什么是业务层"></a>10. 什么是业务层</h2><ul><li><p>MVC: Model 模型，View 视图， Controller 控制器</p><ul><li>视图层：用于做数据展示以及和用户交互的一个界面</li><li>控制层：能够接受客户端的请求，具体的业务功能还是需要模型来完成</li><li>模型层：模型分为很多种：有比较简单的pojo/vo(value object)，有业务模型组件，有数据访问层组件</li><li>pojo/vo:值对象</li><li>DAO:数据访问对象</li><li>BO:业务对象</li></ul></li><li><p>区分业务对象和数据访问对象</p><p>1.DAO中的方法都是单精度方法或者称为细粒度方法。一个方法只考虑一个操作</p><p>2.BO中的方法属于业务方法，实际的业务是比较复杂的，因此业务方法的粒度是比较粗的</p><p>注册这个功能属于业务功能，也就是说注册这个方法属于业务方法</p><p>那么这个业务方法中包含了多个DAO方法。也就是说注册这个业务功能需要通过多个DAO方法的组合调用，从而完成注册功能开发。</p></li></ul><h2 id="11-IOC"><a href="#11-IOC" class="headerlink" title="11. IOC"></a>11. IOC</h2><ul><li><p>耦合/依赖</p><p>依赖指的是某某某离不开某某某</p><p>在软件系统中，层与层是存在依赖的。我们也称之为耦合</p><p>我们系统架构或者是设计的一个原则是：高内聚低耦合</p><p>层内部的组成应该是高度聚合的，而层与层之间的关系应该是低耦合的，最理想的情况0耦合</p></li><li><p>IOC - 控制反转 / DI - 依赖注入</p></li><li><p>控制反转：</p><ol><li><p>之前在Servlet中，我们创建service对象，FruitService fruitService = new FruitServiceImpl();</p><p>这种写法如果出现在Service中的某个方法内部，那么这个fruitService的作用域应该就是这个方法级别；如果这种写法出现在Service的类中，那么这个fruitService的作用域就是这个Service实例级别</p></li><li><p>之后我们在applicationContext.xml中定义了这个fruitService。然后通过解析XML，产生fruitService实例，存放在beanMap中，这个beanMap在一个BeanFactory中。</p><p>因此我们转移了之前的service实例、dao实例等等他们的生命周期。控制权从程序员转移到BeanFactory。这个现象我们称之为控制反转</p></li></ol></li><li><p>依赖注入：</p><ol><li><p>之前我们在控制层出现代码：FruitService fruitService = new FruitServiceImpl();</p><p>那么，控制层和service层存在耦合。</p></li><li><p>之后我们将代码修改成FruitService fruitService = null;</p><p>然后在配置文件中配置:</p><p><code>&lt;bean id=&quot;fruit&quot; class=&quot;FruitController&quot;&gt;</code></p><p>​ <code>&lt;property name=&quot;fruitService&quot; ref=&quot;fruitService&quot;/&gt;</code></p><p><code>&lt;/bean&gt;</code></p><p>这就是依赖注入。</p></li></ol></li></ul><h2 id="12-过滤器Filter"><a href="#12-过滤器Filter" class="headerlink" title="12. 过滤器Filter"></a>12. 过滤器Filter</h2><ul><li><p>Filter也属于Servlet规范</p></li><li><p>Filter开发步骤：新建类实现Filter接口，然后实现其中的三个方法：init/doFilter/destroy</p><p>配置Filter，可以使用注解@WebFilter，也可以使用xml文件</p></li><li><p>Filter配置时，也可以配置通配符。例如@WebFilter(“*.do”)表示拦截所有以.do结尾的请求</p></li><li><p>过滤器链：</p><ol><li>如果采取注解的方式进行配置，那么过滤器的拦截顺序是按照全类名的先后顺序排序的</li><li>如果采取的是xml的方式进行配置，那么按照配置的先后顺序进行排序</li></ol></li></ul><h2 id="13-监听器"><a href="#13-监听器" class="headerlink" title="13. 监听器"></a>13. 监听器</h2><ul><li>ServletContextListener - 监听ServletContext对象的创建和销毁</li><li>HttpSessionListener - 监听HttpSession对象的创建和销毁</li><li>ServletRequestListener - 监听ServletRequest对象的创建和销毁</li></ul><ul><li>ServletContextAttributeListener - 监听ServletContext的保存作用域的改动(add, remove, replace)</li><li>HttpSessionAttributeListener - 监听HttpSession的保存作用域的改动(add, remove, replace)</li><li>ServletRequestAttributeListener - 监听ServletRequest的保存作用域的改动(add, remove, replace)</li></ul><ul><li>HttpSessionBindingListener - 监听某个对象在Session域中的创建和移除</li><li>HttpSessionActivationListener - 监听某个对象在Session域中的序列化和反序列化时</li></ul><h2 id="13-事务管理"><a href="#13-事务管理" class="headerlink" title="13. 事务管理"></a>13. 事务管理</h2><ul><li><p>service操作应该是一个整体。事务管理不能以DAO层的单精度方法为单位，而应该以业务层的方法为单位</p></li><li><p>ThreadLocal</p><p>-get(), set(obj)</p><p>-ThreadLocal称为本地线程，我们可以通过set方法在当前线程上存储数据，通过get方法在当前线程上获取数据</p><p>-set方法源码分析：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(T value)</span>&#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();<span class="comment">//获取当前的线程</span></span><br><span class="line">    <span class="type">ThreadLocal</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);<span class="comment">//每一个线程都维护一个容器(ThreadLocalMap)</span></span><br><span class="line">    <span class="keyword">if</span>(map != <span class="literal">null</span>)</span><br><span class="line">        map.set(<span class="built_in">this</span>, value);</span><br><span class="line">    <span class="comment">//this代表当前的ThreadLocal，因为我们的组件中需要传输的对象可能有多个，map中可以存放多个ThreadLocal</span></span><br><span class="line">  	<span class="comment">//一个线程对应一个ThreadLocalMap，一个ThreadLocalMap对应多个TreadLocal，一个ThreadLocal对应一个需要同步的值</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        creatMap(t, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>-get方法源码分析：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();<span class="comment">//获取当前的线程</span></span><br><span class="line">        <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);<span class="comment">//每一个线程都维护一个容器(ThreadLocalMap)</span></span><br><span class="line">        <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123;</span><br><span class="line">            ThreadLocalMap.<span class="type">Entry</span> <span class="variable">e</span> <span class="operator">=</span> map.getEntry(<span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">                <span class="type">T</span> <span class="variable">result</span> <span class="operator">=</span> (T)e.value;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> setInitialValue();</span><br></pre></td></tr></table></figure></li></ul><h1 id="2-Thymeleaf-视图模板技术"><a href="#2-Thymeleaf-视图模板技术" class="headerlink" title="#2. Thymeleaf - 视图模板技术"></a>#2. Thymeleaf - 视图模板技术</h1><ul><li>Servlet从3.0版本开始支持注解方式的注册，不需要写xml文件了</li></ul><ol><li>添加thymeleaf的jar包</li><li>新建一个Servlet类VieBaseServlet</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myssm.myspringMVC;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.TemplateEngine;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.context.WebContext;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templatemode.TemplateMode;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templateresolver.ServletContextTemplateResolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> adomais</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-08-04-16:58</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ViewBaseServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TemplateEngine templateEngine;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.创建Thymeleaf解析器对象</span></span><br><span class="line">        <span class="type">ServletContextTemplateResolver</span> <span class="variable">templateResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextTemplateResolver</span>(servletContext);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.给解析器对象设置参数</span></span><br><span class="line">        <span class="comment">// ①HTML是默认模式，明确设置是为了代码更容易理解</span></span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ②设置前缀</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">viewPrefix</span> <span class="operator">=</span> servletContext.getInitParameter(<span class="string">&quot;view-prefix&quot;</span>);</span><br><span class="line"></span><br><span class="line">        templateResolver.setPrefix(viewPrefix);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ③设置后缀</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">viewSuffix</span> <span class="operator">=</span> servletContext.getInitParameter(<span class="string">&quot;view-suffix&quot;</span>);</span><br><span class="line"></span><br><span class="line">        templateResolver.setSuffix(viewSuffix);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ④设置缓存过期时间（毫秒）</span></span><br><span class="line">        templateResolver.setCacheTTLMs(<span class="number">60000L</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ⑤设置是否缓存</span></span><br><span class="line">        templateResolver.setCacheable(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ⑥设置服务器端编码方式</span></span><br><span class="line">        templateResolver.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.创建模板引擎对象</span></span><br><span class="line">        templateEngine = <span class="keyword">new</span> <span class="title class_">TemplateEngine</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.给模板引擎对象设置模板解析器</span></span><br><span class="line">        templateEngine.setTemplateResolver(templateResolver);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">processTemplate</span><span class="params">(String templateName, HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.设置响应体内容类型和字符集</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.创建WebContext对象</span></span><br><span class="line">        <span class="type">WebContext</span> <span class="variable">webContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WebContext</span>(req, resp, getServletContext());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.处理模板数据</span></span><br><span class="line">        templateEngine.process(templateName, webContext, resp.getWriter());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>在web.xml文件中添加配置</p><p>配置前缀 view - prefix</p><p>配置后缀 view - suffix</p></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置上下文参数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>view-prefix<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>/<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>view-suffix<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>.html<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>让我们的Servlet继承ViewBaseServlet</li><li>根据逻辑视图名称 得到 物理视图名称</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fruit.servlets;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> fruit.bean.Fruit;</span><br><span class="line"><span class="keyword">import</span> fruit.dao.FruitDAO;</span><br><span class="line"><span class="keyword">import</span> fruit.dao.impl.FruitDAOImpl;</span><br><span class="line"><span class="keyword">import</span> myssm.myspringMVC.ViewBaseServlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> adomais</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-08-04-16:06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//Servlet从3.0版本开始支持注解方式的注册</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/index&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexServlet</span> <span class="keyword">extends</span> <span class="title class_">ViewBaseServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">FruitDAO</span> <span class="variable">fruitDAO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FruitDAOImpl</span>();</span><br><span class="line"></span><br><span class="line">        List&lt;Fruit&gt; list = fruitDAO.getFruitList();</span><br><span class="line">        <span class="comment">//保存到session作用域</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">        <span class="comment">//此处的视图名称是 index</span></span><br><span class="line">        <span class="comment">//那么thymeleaf会将这个逻辑视图名称对应到 物理视图 名称上去</span></span><br><span class="line">        <span class="comment">//逻辑视图名称：  index</span></span><br><span class="line">        <span class="comment">//物理视图名称：  view-prefix + 逻辑视图名称 + view-suffix</span></span><br><span class="line">        <span class="comment">//所以真实的视图名称是：/    index   .html</span></span><br><span class="line">        <span class="built_in">super</span>.processTemplate(<span class="string">&quot;index&quot;</span>, req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li><p>使用thymeleaf的标签</p><p>th:if</p><p>th:unless</p><p>th:each</p><p>th:text</p></li></ol></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="https://egghead.top">adomais</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://egghead.top/2022/06/12/web_note/">https://egghead.top/2022/06/12/web_note/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://egghead.top" target="_blank">adomais's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JAVA/">JAVA</a></div><div class="post_share"><div class="social-share" data-image="https://npm.elemecdn.com/adomais/6.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/11/18/git_note/"><img class="prev-cover" src="https://npm.elemecdn.com/adomais/2.webp" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Git基础操作指南</div></div></a></div><div class="next-post pull-right"><a href="/2022/05/20/MySQL/"><img class="next-cover" src="https://npm.elemecdn.com/adomais/2.webp" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">MySQL入门</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/04/20/java_new_version9_10_11/" title="JAVA9&#x2F;10&#x2F;11新特性"><img class="cover" src="https://npm.elemecdn.com/adomais/7.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-20</div><div class="title">JAVA9&#x2F;10&#x2F;11新特性</div></div></a></div><div><a href="/2022/04/30/jdbc_note/" title="JDBC入门"><img class="cover" src="https://npm.elemecdn.com/adomais/6.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-30</div><div class="title">JDBC入门</div></div></a></div><div><a href="/2022/04/10/nomal_class/" title="Java常用类"><img class="cover" src="https://npm.elemecdn.com/adomais/8.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-10</div><div class="title">Java常用类</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="cols"><div class="col"><div class="container"><div class="front avatarPanel"><div class="inner"><div class="player-title">Attributes</div><div class="player-avatar"><img src="https://npm.elemecdn.com/adomais/adomais2.webp" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div></div></div><div class="back attributesPanel"><div class="inner"><div class="player-lv">LV.8</div><div class="player-name">adomais</div><div class="attributes-value"><div class="attributes-value-item"><a href="/archives/"><div class="attributes">文章</div><div class="value-bar"><div class="value-bar-fill" style="width:75%"><div class="value-bar-fill-in" style="background:rgba(89,230,54,.6)"></div></div></div><span>75/100</span></a></div><div class="attributes-value-item"><a href="/tags/"><div class="attributes">标签</div><div class="value-bar"><div class="value-bar-fill" style="width:54%"><div class="value-bar-fill-in" style="background:rgba(224,20,20,.6)"></div></div></div><span>54/100</span></a></div><div class="attributes-value-item"><a href="/categories/"><div class="attributes">分类</div><div class="value-bar"><div class="value-bar-fill" style="width:7%"><div class="value-bar-fill-in" style="background:rgba(30,97,226,.6)"></div></div></div><span>7/100</span></a></div></div></div></div></div></div><div class="col"><div class="container"><div class="front descriptionPanel"><div class="inner"><div class="player_description"><div class="author_card" style="text-align:center"><b>莫听穿林打叶声，<br>何妨吟啸且徐行。<br>竹杖芒鞋轻胜马，<br>一蓑烟雨任平生。</b></div></div><div class="play-bottom"></div></div></div><div class="back buttonPanel"><div class="inner"><a class="button--animated" id="card-info-btn" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=982905042&amp;website=www.oicqzone.com"><i class="fab fa-telegram-plane"></i><span>vx:pbdhj</span></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/adomais" target="_blank" title="Github"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></a><a class="social-icon faa-parent animated-hover" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=982905042&amp;website=www.oicqzone.com" target="_blank" title="QQ"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-qq"></use></svg></a><a class="social-icon faa-parent animated-hover" href="Mailto:rgsychen@gmail.com" target="_blank" title="Email"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gmail"></use></svg></a></div><div class="play-bottom"></div></div></div></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Servlet"><span class="toc-number">1.</span> <span class="toc-text">#1. Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1. 获取参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%81"><span class="toc-number">1.1.1.</span> <span class="toc-text">注意！</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%AE%BE%E7%BD%AE%E7%BC%96%E7%A0%81"><span class="toc-number">1.2.</span> <span class="toc-text">2.设置编码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Servlet%E7%9A%84%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB"><span class="toc-number">1.3.</span> <span class="toc-text">3. Servlet的继承关系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. 继承关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 相关方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#service-%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">service()方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.4.</span> <span class="toc-text">4. Servlet的生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E6%97%B6%E6%9C%BA"><span class="toc-number">1.4.1.</span> <span class="toc-text">Servlet的初始化时机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet%E5%9C%A8%E5%AE%B9%E5%99%A8%E4%B8%AD%E6%98%AF%EF%BC%9A%E5%8D%95%E4%BE%8B%E7%9A%84%EF%BC%8C%E7%BA%BF%E7%A8%8B%E4%B8%8D%E5%AE%89%E5%85%A8%E7%9A%84"><span class="toc-number">1.4.2.</span> <span class="toc-text">Servlet在容器中是：单例的，线程不安全的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.4.3.</span> <span class="toc-text">初始化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Http%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.5.</span> <span class="toc-text">5. Http协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AF%B7%E6%B1%82"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. 请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%93%8D%E5%BA%94"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. 响应</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E4%BC%9A%E8%AF%9D"><span class="toc-number">1.6.</span> <span class="toc-text">6. 会话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%86%85%E9%83%A8%E8%BD%AC%E5%8F%91%E4%BB%A5%E5%8F%8A%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.7.</span> <span class="toc-text">7. 服务器内部转发以及客户端重定向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E4%BF%9D%E5%AD%98%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.8.</span> <span class="toc-text">8. 保存作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.9.</span> <span class="toc-text">9. 路径问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%9A%E5%8A%A1%E5%B1%82"><span class="toc-number">1.10.</span> <span class="toc-text">10. 什么是业务层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-IOC"><span class="toc-number">1.11.</span> <span class="toc-text">11. IOC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E8%BF%87%E6%BB%A4%E5%99%A8Filter"><span class="toc-number">1.12.</span> <span class="toc-text">12. 过滤器Filter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.13.</span> <span class="toc-text">13. 监听器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">1.14.</span> <span class="toc-text">13. 事务管理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Thymeleaf-%E8%A7%86%E5%9B%BE%E6%A8%A1%E6%9D%BF%E6%8A%80%E6%9C%AF"><span class="toc-number">2.</span> <span class="toc-text">#2. Thymeleaf - 视图模板技术</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/11/18/git_note/" title="Git基础操作指南"><img src="https://npm.elemecdn.com/adomais/2.webp" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Git基础操作指南"></a><div class="content"><a class="title" href="/2022/11/18/git_note/" title="Git基础操作指南">Git基础操作指南</a><time datetime="2022-11-18T13:00:10.000Z" title="发表于 2022-11-18 21:00:10">2022-11-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/12/web_note/" title="JAVAweb入门"><img src="https://npm.elemecdn.com/adomais/6.webp" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="JAVAweb入门"></a><div class="content"><a class="title" href="/2022/06/12/web_note/" title="JAVAweb入门">JAVAweb入门</a><time datetime="2022-06-12T08:30:10.000Z" title="发表于 2022-06-12 16:30:10">2022-06-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/20/MySQL/" title="MySQL入门"><img src="https://npm.elemecdn.com/adomais/2.webp" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="MySQL入门"></a><div class="content"><a class="title" href="/2022/05/20/MySQL/" title="MySQL入门">MySQL入门</a><time datetime="2022-05-20T07:30:10.000Z" title="发表于 2022-05-20 15:30:10">2022-05-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/30/jdbc_note/" title="JDBC入门"><img src="https://npm.elemecdn.com/adomais/6.webp" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="JDBC入门"></a><div class="content"><a class="title" href="/2022/04/30/jdbc_note/" title="JDBC入门">JDBC入门</a><time datetime="2022-04-30T12:39:10.000Z" title="发表于 2022-04-30 20:39:10">2022-04-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/20/java_new_version9_10_11/" title="JAVA9/10/11新特性"><img src="https://npm.elemecdn.com/adomais/7.webp" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="JAVA9/10/11新特性"></a><div class="content"><a class="title" href="/2022/04/20/java_new_version9_10_11/" title="JAVA9/10/11新特性">JAVA9/10/11新特性</a><time datetime="2022-04-20T08:33:13.000Z" title="发表于 2022-04-20 16:33:13">2022-04-20</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By adomais</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(()=>{const t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-api-henna.vercel.app",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))},o=()=>{"object"!=typeof twikoo?getScript("https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js").then(t):setTimeout(t,0)};o()})()</script></div><script async src="/js/diytitle.js"></script><script async src="/js/grayscale.js"></script><script src="/js/sun_moon.js" async></script><div class="aplayer no-destroy" data-id="7723010396" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script async src="//at.alicdn.com/t/c/font_3747124_7x8eensfst9.js"></script><script async data-pjax src="/js/custom/nav.js"></script><script>WIDGET={CONFIG:{modules:"012",background:"5",tmpColor:"FFFFFF",tmpSize:"16",cityColor:"FFFFFF",citySize:"16",aqiColor:"FFFFFF",aqiSize:"16",weatherIconSize:"24",alertIconSize:"18",padding:"10px 10px 10px 10px",shadow:"0",language:"auto",fixed:"false",vertical:"top",horizontal:"left",key:"81d0322ef571460d96ab68a08a2b410d"}}</script><script defer data-pjax src="https://widget.heweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script data-pjax>function butterfly_categories_card_injector_config(){var a=document.getElementById("recent-posts");console.log("已挂载butterfly_categories_card"),a.insertAdjacentHTML("afterbegin",'<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/adomais/cover1.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/题解/&quot;);" href="javascript:void(0);">题解</a><span class="categoryBar-list-count">35</span><span class="categoryBar-list-descr">c++基础指南</span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/adomais/cover2.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/c/&quot;);" href="javascript:void(0);">c++</a><span class="categoryBar-list-count">6</span><span class="categoryBar-list-descr">算法题解</span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/adomais/cover3.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/算法/&quot;);" href="javascript:void(0);">算法</a><span class="categoryBar-list-count">26</span><span class="categoryBar-list-descr">基础算法</span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/adomais/cover4.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/操作指南/&quot;);" href="javascript:void(0);">操作指南</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">基础操作说明书</span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/adomais/cover5.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/JAVA/&quot;);" href="javascript:void(0);">JAVA</a><span class="categoryBar-list-count">4</span><span class="categoryBar-list-descr">JAVA入门</span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/adomais/cover6.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/计算机基础/&quot;);" href="javascript:void(0);">计算机基础</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">计算机基础</span></li><li class="categoryBar-list-item" style="background:url(undefined);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/MySQL/&quot;);" href="javascript:void(0);">MySQL</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li></ul></div></div>')}document.getElementById("recent-posts")&&"/"===location.pathname&&butterfly_categories_card_injector_config()</script><script data-pjax>function butterfly_swiper_injector_config(){var i=document.getElementById("recent-posts");console.log("已挂载butterfly_swiper"),i.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2021/11/19/KMP算法/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://npm.elemecdn.com/adomais/7.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-11-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2021/11/19/KMP算法/&quot;);" href="javascript:void(0);" alt="">KMP算法</a><div class="blog-slider__text">KMP 算法（Knuth-Morris-Pratt 算法）是一个著名的字符串匹配算法，效率很高，但是比较难以理解</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2021/11/19/KMP算法/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2021/11/16/双指针算法/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://npm.elemecdn.com/adomais/9.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-11-16</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2021/11/16/双指针算法/&quot;);" href="javascript:void(0);" alt="">双指针算法</a><div class="blog-slider__text">双指针算法的核心思想：找单调性，优化暴力枚举。找单调性，找单调性，让指针不用回退可以一往无前~</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2021/11/16/双指针算法/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2021/11/19/栈与队列/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://npm.elemecdn.com/adomais/8.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-11-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2021/11/19/栈与队列/&quot;);" href="javascript:void(0);" alt="">栈与队列</a><div class="blog-slider__text">把栈想象成以一个有底的桶，先进后出；把队列想象成一个两通的管道，先进先出</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2021/11/19/栈与队列/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2021/11/13/排序算法/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://npm.elemecdn.com/adomais/2.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-11-13</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2021/11/13/排序算法/&quot;);" href="javascript:void(0);" alt="">排序算法</a><div class="blog-slider__text">快排其实利用了双指针算法的思想，先调整区间再递归处理，这很好</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2021/11/13/排序算法/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2021/11/14/二分查找/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://npm.elemecdn.com/adomais/2.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-11-14</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2021/11/14/二分查找/&quot;);" href="javascript:void(0);" alt="">二分查找</a><div class="blog-slider__text">二分查找，相当食用的查找方法，不仅在算法题中，在生活中也可以用到哦</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2021/11/14/二分查找/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","1s"),arr[i].setAttribute("data-wow-delay","1s"),arr[i].setAttribute("data-wow-offset","100"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>function gitcalendar_injector_config(){document.getElementById("recent-posts").insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>'),console.log("已挂载gitcalendar")}document.getElementById("recent-posts")&&"/"===location.pathname&&(gitcalendar_injector_config(),GitCalendarInit("https://gitcalendar.zfe.space/api?adomais",["#e4dfd7","#f9f4dc","#f7e8aa","#f7e8aa","#f8df72","#fcd217","#fcc515","#f28e16","#fb8b05","#d85916","#f43e06"],"adomais"))</script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script></body></html>